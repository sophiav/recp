<div id="recipe">
  <h1 class="recipe-title text-center">
    <%= @recipe.title %>
  </h1>

  <h4 class="recipe-details text-center">
    <small class="text-muted">
      <%= display_recipe_categories(@recipe.categories) %>
    </small>
    <small><%= @recipe.prep_time %> minutes</small>
  </h4>

  <% if @recipe.image.file? %>
    <%= image_tag @recipe.image.url(:large), class: 'recipe-image img-fluid rounded mx-auto d-block' %>
  <% end %>

  <div class="recipe-smaller-box">
    <div class="recipe-ingredients">
      <h3>Ingredients</h3>
      <table>
        <tbody>
          <% @recipe.ingredients.each do |ingredient| %>
            <tr>
              <td class="ingredient-quantity"><%= ingredient.quantity %></td>
              <td><%= ingredient.name %></td>
            </tr>
          <% end  %>
        </tbody>
      </table>
    </div>

    <div class="recipe-instructions">
      <h3>Instructions</h3>
      <p class="text-justify"><%= @recipe.description %></p>

      <div class="btn-group" role="group">
        <div class="form-buttons">
          <% if owner?(@recipe) %>
            <%= link_to "Edit Recipe", edit_recipe_path(@recipe), class: 'btn btn-outline-primary btn-sm'%>
            <%= link_to "Delete Recipe", @recipe, method: :delete, data: { confirm: "Are you sure you want to delete this recipe?"}, class: 'btn btn-outline-danger btn-sm' %>
          <% end %>
        </div>
      </div>
    </div>

    <div class="next-previous-links">
      <% if @recipe.previous  %>
        <a href="#" data-id="<%= @recipe.previous %>" class="previous-link">Previous</a>
      <% end %>
      <% if @recipe.next  %>
        <a href="#" data-id="<%= @recipe.next %>" class="next-link">Next</a>
      <% end  %>
    </div>

  </div>

  <div class="recipe-comments">
    <h3>Comments</h3>
    <%= render 'comments/form' %>

    <ul id="comments" class="list-unstyled">
      <%= render 'comments/recipe_comments', comments: @comments, recipe: @recipe %>
    </ul>

  </div>
</div>

<%= link_to "<< Back to Recipes", root_path, class: 'btn btn-outline-primary btn-small back-to-recipes-button'%>

<script type="text/javascript" charset="utf-8">
  attachShowPageListeners();
</script>
